# 123FastLinkPlus

一键将夸克网盘、天翼云盘的个人文件和分享链接转存到123云盘的用户脚本工具。

## 功能截图

![功能截图](https://pan1.me/upload/attach/202601/14166_FV2VVTBNZWJ9CF2.png)
![功能截图](https://pan1.me/upload/attach/202601/14166_VBJUY25SDFMVHZR.png)
![功能截图](https://pan1.me/upload/attach/202601/14166_N4ZC49UVJA5Z2XY.png)
![功能截图](https://pan1.me/upload/attach/202601/14166_PBMA4BPSFF95U64.png)

## ✨ 功能特性

### 🔄 多平台支持
- **夸克网盘**：支持个人文件和分享链接转存
- **天翼云盘**：支持个人文件和分享链接转存
- **123云盘**：作为目标存储平台，支持秒传功能

### 🚀 核心功能
- **秒传转存**：利用文件MD5值实现极速秒传，无需下载再上传
- **批量操作**：支持批量选择文件和文件夹进行转存
- **文件夹结构**：自动保持原有的文件夹层级结构
- **目标文件夹选择**：支持在123云盘中选择具体的转存位置
- **新建文件夹**：在转存过程中可以直接创建新文件夹

### 🎨 用户界面
- **直观的操作界面**：清晰的对话框和操作流程
- **实时进度显示**：转存过程中显示详细的进度信息
- **文件转存日志**：记录每个文件的转存状态和结果
- **响应式设计**：适配不同屏幕尺寸
- **流畅的动画效果**：提升用户体验

### 🔒 安全与隐私
- **本地存储**：使用Tampermonkey的GM_setValue安全存储认证信息
- **无第三方依赖**：纯原生JavaScript实现，不依赖外部库
- **加密传输**：所有API请求使用HTTPS协议

### ⚡ 性能优化
- **并行处理**：批量文件处理时使用并行请求提升速度
- **分批处理**：大文件列表采用分批处理，避免内存占用过高
- **缓存机制**：缓存对话框和认证信息，减少重复操作
- **DOM操作优化**：减少不必要的DOM操作，提升界面响应速度

## 📦 安装方法

### 1. 安装浏览器扩展

首先需要安装用户脚本管理器扩展：

- **Chrome/Edge**：[Tampermonkey](https://www.tampermonkey.net/)
- **Firefox**：[Greasemonkey](https://addons.mozilla.org/zh-CN/firefox/addon/greasemonkey/) 或 Tampermonkey
- **Safari**：[Tampermonkey for Safari](https://apps.apple.com/app/tampermonkey/id1482490089)

### 2. 安装脚本

1. 下载本项目中的 `123FastLinkPlus.js` 文件
2. 在浏览器中打开 Tampermonkey 扩展
3. 点击「添加新脚本」
4. 将 `123FastLinkPlus.js` 的内容复制粘贴到编辑器中
5. 点击「文件」→「保存」或使用快捷键 `Ctrl+S` 保存脚本

## 🚀 使用方法

### 1. 配置认证信息

首次使用前，需要配置123云盘的认证信息：

1. 登录123云盘官方网站
2. 打开浏览器开发者工具（F12）
3. 进入「Application」→「Local Storage」
4. 找到并复制 `authorToken` 和 `areaid` 的值
5. 在天翼云盘和夸克云盘页面，脚本首次加载会提示输入，粘贴刚才复制的值并保存

### 2. 转存文件

#### 从夸克网盘转存

1. 打开夸克网盘网站
2. 选择要转存的文件或文件夹
3. 点击界面中的「转存到123云盘」按钮
4. 在弹出的对话框中选择目标文件夹
5. 等待转存完成

#### 从天翼云盘转存

1. 打开天翼云盘网站
2. 选择要转存的文件或文件夹
3. 点击界面中的「转存到123云盘」按钮
4. 在弹出的对话框中选择目标文件夹
5. 等待转存完成

#### 从分享链接转存

1. 打开分享链接（夸克或天翼云盘）
2. 输入提取码（如果需要）
3. 点击界面中的「转存到123云盘」按钮
4. 在弹出的对话框中选择目标文件夹
5. 等待转存完成

### 3. 目标文件夹选择

- **浏览文件夹**：点击文件夹进入子目录
- **返回上级**：点击面包屑导航中的文件夹名称
- **新建文件夹**：在输入框中输入名称，点击「新建」按钮
- **搜索文件夹**：在顶部搜索框中输入关键词进行搜索

## 🛠️ 技术架构

### 核心模块

1. **utils**：工具函数集合，包括网络请求、DOM操作、对话框管理等
2. **pan123**：123云盘API客户端，处理文件转存和文件夹操作
3. **tianyiService**：天翼云盘服务，处理文件获取和分享链接解析

### API集成

- **123云盘API**：用于文件转存、文件夹列表获取和创建
- **夸克网盘API**：用于获取文件信息和MD5值
- **天翼云盘API**：用于获取文件信息和分享链接解析

### 技术特点

- **Promise-based异步编程**：使用Promise和async/await处理异步操作
- **模块化设计**：清晰的代码结构和模块划分
- **响应式UI**：使用CSS变量和现代化的样式设计
- **MutationObserver**：用于监控DOM变化，实现动态注入按钮
- **批量并行处理**：优化网络请求，提升处理速度

## 🔧 配置选项

### 123云盘认证信息
- **authorToken**：123云盘认证令牌
- **LoginUuid**：123云盘登录UUID

### 夸克网盘Cookie（可选）
- 某些情况下需要提供夸克网盘的Cookie以获取文件信息

## 📝 常见问题

### Q: 转存失败怎么办？
A: 请检查以下几点：
- 123云盘认证信息是否正确
- 网络连接是否正常
- 文件是否存在且可访问
- 目标文件夹权限是否正确

### Q: 为什么有的文件不能秒传？
A: 秒传功能依赖于文件的MD5值，只有123云盘中已存在相同MD5值的文件才能秒传。

### Q: 转存速度慢怎么办？
A: 脚本已经优化了并行处理能力，但受限于网络环境和API限制，大批量文件转存可能需要一定时间。

### Q: 如何更新脚本？
A: 下载最新版本的 `123FastLinkPlus.js` 文件，然后在Tampermonkey中更新脚本内容。

## 🔒 隐私声明
- 本脚本仅在本地运行，不会将您的认证信息发送到任何第三方服务器
- 所有API请求均直接发送到对应的云盘服务提供商
- 认证信息使用Tampermonkey的安全存储机制，不会明文存储

## 📄 许可证

本项目采用 Apache-2.0 许可证。详见 [LICENSE](LICENSE) 文件。

## 📞 反馈与支持

如果您在使用过程中遇到问题，或有任何建议，请通过以下方式反馈：

- 在项目仓库中提交Issue

---

**注意**：本脚本仅用于个人数据迁移和备份，请勿用于任何违反相关服务条款的用途

---

*Made with ❤️ by meguoe*
